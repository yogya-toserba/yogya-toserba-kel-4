<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test Dropdown Actions</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
            }
            .test-result {
                padding: 10px;
                margin: 10px 0;
                border-radius: 5px;
            }
            .success {
                background-color: #d4edda;
                border: 1px solid #c3e6cb;
                color: #155724;
            }
            .error {
                background-color: #f8d7da;
                border: 1px solid #f5c6cb;
                color: #721c24;
            }
            .info {
                background-color: #d1ecf1;
                border: 1px solid #bee5eb;
                color: #0c5460;
            }
        </style>
    </head>
    <body>
        <h2>üß™ Test Dropdown Actions</h2>

        <div id="testResults"></div>

        <div style="margin-top: 20px">
            <button onclick="testViewDetailDirect()">
                Test View Detail (Direct)
            </button>
            <button onclick="testEditGajiDirect()">
                Test Edit Gaji (Direct)
            </button>
            <button onclick="openPenggajianPage()">Open Penggajian Page</button>
        </div>

        <script>
            function logResult(message, type = "info") {
                const results = document.getElementById("testResults");
                const div = document.createElement("div");
                div.className = `test-result ${type}`;
                div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
                results.appendChild(div);
                console.log(message);
            }

            function testViewDetailDirect() {
                logResult("üß™ Testing View Detail API directly...", "info");

                fetch("http://127.0.0.1:8000/admin/penggajian/7/api", {
                    method: "GET",
                    headers: {
                        Accept: "application/json",
                        "X-Requested-With": "XMLHttpRequest",
                    },
                })
                    .then((response) => {
                        logResult(
                            `üì° API Response: ${response.status} ${response.statusText}`,
                            response.ok ? "success" : "error"
                        );
                        return response.json();
                    })
                    .then((data) => {
                        if (data.success) {
                            logResult(
                                "‚úÖ API call successful - data received",
                                "success"
                            );
                            logResult(
                                `üìÑ HTML length: ${data.html.length} characters`,
                                "info"
                            );
                        } else {
                            logResult(
                                `‚ùå API returned error: ${data.message}`,
                                "error"
                            );
                        }
                    })
                    .catch((error) => {
                        logResult(`‚ùå Fetch error: ${error.message}`, "error");
                    });
            }

            function testEditGajiDirect() {
                logResult("üß™ Testing Edit Gaji page directly...", "info");

                fetch("http://127.0.0.1:8000/admin/penggajian/7/edit", {
                    method: "GET",
                    headers: {
                        Accept: "text/html",
                    },
                })
                    .then((response) => {
                        logResult(
                            `üì° Edit Page Response: ${response.status} ${response.statusText}`,
                            response.ok ? "success" : "error"
                        );
                        if (response.ok) {
                            logResult("‚úÖ Edit page is accessible", "success");
                        } else {
                            logResult("‚ùå Edit page not accessible", "error");
                        }
                    })
                    .catch((error) => {
                        logResult(
                            `‚ùå Edit page error: ${error.message}`,
                            "error"
                        );
                    });
            }

            function openPenggajianPage() {
                window.open("http://127.0.0.1:8000/admin/penggajian", "_blank");
            }

            // Run initial test
            logResult("üöÄ Test page loaded", "success");
        </script>
    </body>
</html>
