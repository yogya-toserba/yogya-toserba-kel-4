<!DOCTYPE html>
<html>
<head>
    <title>Test Action Buttons</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h3>Test Action Buttons</h3>
        
        <div class="d-flex flex-wrap gap-1 justify-content-center mt-4">
            <button class="btn btn-sm btn-outline-info" title="Lihat Detail" data-action="view-detail" data-id="123">
                <i class="fas fa-eye"></i> Detail
            </button>
            <button class="btn btn-sm btn-outline-warning" title="Edit Gaji" data-action="edit-gaji" data-id="123">
                <i class="fas fa-edit"></i> Edit
            </button>
            <button class="btn btn-sm btn-outline-success" title="Tandai Dibayar" data-action="mark-paid" data-id="123">
                <i class="fas fa-check"></i> Bayar
            </button>
            <button class="btn btn-sm btn-outline-primary" title="Cetak Slip" data-action="generate-slip" data-id="123">
                <i class="fas fa-file-pdf"></i> Slip
            </button>
            <button class="btn btn-sm btn-outline-danger" title="Hapus" data-action="delete-gaji" data-id="123" data-name="Test User">
                <i class="fas fa-trash"></i> Hapus
            </button>
        </div>
        
        <div id="output" class="mt-4 p-3 bg-light">
            <h5>Output:</h5>
            <div id="log"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
        }

        document.addEventListener('DOMContentLoaded', function() {
            log('DOM loaded, setting up event delegation...');
            
            document.addEventListener('click', function(e) {
                log('Click detected on: ' + e.target.tagName + ' ' + (e.target.className || ''));
                
                const target = e.target.closest('[data-action]');
                log('Target with data-action: ' + (target ? target.tagName : 'null'));
                
                if (!target) return;

                e.preventDefault();
                e.stopPropagation();

                const action = target.getAttribute('data-action');
                const id = target.getAttribute('data-id');
                const name = target.getAttribute('data-name');

                log(`Action: ${action}, ID: ${id}, Name: ${name || 'N/A'}`);

                switch (action) {
                    case 'view-detail':
                        log('✅ View Detail action triggered');
                        break;
                    case 'edit-gaji':
                        log('✅ Edit Gaji action triggered');
                        break;
                    case 'mark-paid':
                        log('✅ Mark Paid action triggered');
                        break;
                    case 'generate-slip':
                        log('✅ Generate Slip action triggered');
                        break;
                    case 'delete-gaji':
                        log('✅ Delete Gaji action triggered');
                        break;
                    default:
                        log('❌ Unknown action: ' + action);
                }
            });
            
            log('Event delegation setup complete');
        });
    </script>
</body>
</html>
